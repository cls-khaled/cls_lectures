<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Get All Posts </title>
</head>
<body>


  <h1> Hello JS Request </h1>

    <div id="content">

    </div>

<hr style="width: 100%; height: 5px; background-color: red;">
<h1> Read Post By User Filter </h1>


 <div id="contentByUserFilter">

    </div>
    
    <script>


function readPosts()
{
        /*01- Create Object from XML HTTP Request Class */
      let request=new XMLHttpRequest();
      request.open("GET","https://jsonplaceholder.typicode.com/posts"); //-- Open Request

      request.responseType="json"; //-- To read Data as a Json not as a String 

      request.send(); //-- Send Request

    
      request.onload=function(){
      
        if(request.status>=200 && request.status<300) //-- Ensure Status Code 
      {
          let Posts=request.response;
        for(post of Posts)
      {
        // document.getElementById("content").innerHTML=`<h1>${post.title} </h1>`

        document.getElementById("content").innerHTML+=`<h1>${post.title} </h1>`
         console.log(post.title);
      }
      }
      else
      {
        alert("error ........");
      }
        
      }

}

//------ Create New Post -----

function createNewPost()
{

  /*01- Create Object from XML HTTP Request Class */
      let request=new XMLHttpRequest();
      request.open("POST","https://jsonplaceholder.typicode.com/posts"); //-- Open Request

      request.responseType="json"; //-- To read Data as a Json not as a String 

       request.setRequestHeader("Accept","application/json");
       request.setRequestHeader("Content-type","application/json");
        /*--- لا يصلح ارسال داتا في شكل 
        Json
        يجب تحويلها الي بيانات نصية
        String 
        */

  //   let bodyParams={
  //   title: 'Full Stack',
  //   body: 'Diploma Full Stack',
  //   userId: 100,
  // }
  

       let bodyParams=`{
    "title": "Full Stack",
    "body": "Diploma Full Stack",
    "userId": 100
  }`
  
  request.send(bodyParams);

  request.onload=function(){

    if(request.status>=200 && request.status<300)
  {
 let response=request.response;
    console.log(response);

    console.log("the status Code Is : "+request.status);
  }
   else
   {
    alert("Error Post ");
   }
  }


}





//------  Update  Post -----

function UpdatePost()
{

  /*01- Create Object from XML HTTP Request Class */
      let request=new XMLHttpRequest();
      request.open("PUT","https://jsonplaceholder.typicode.com/posts/1"); //-- Open Request

      request.responseType="json"; //-- To read Data as a Json not as a String 

       request.setRequestHeader("Accept","application/json");
       request.setRequestHeader("Content-type","application/json");
        /*--- لا يصلح ارسال داتا في شكل 
        Json
        يجب تحويلها الي بيانات نصية
        String 
        */

  //   let bodyParams={
  //   title: 'Full Stack',
  //   body: 'Diploma Full Stack',
  //   userId: 100,
  // }
  

       let bodyParams=`{
    "title": "UX/UI",
    "body": "User Experince  Full Stack",
    "userId": 1
  }`
  
  request.send(bodyParams);

  request.onload=function(){

    if(request.status>=200 && request.status<300)
  {
 let response=request.response;
    console.log(response);

    console.log("the status Code Is : "+request.status);
    alert(" Post Updated SuccessFully " );
  }
   else
   {
    alert("Error Post ");
   }
  }


}


//------  Delete   Post -----

function DeletePost()
{

  /*01- Create Object from XML HTTP Request Class */
      let request=new XMLHttpRequest();
      request.open("DELETE","https://jsonplaceholder.typicode.com/posts/1"); //-- Open Request

      request.responseType="json"; //-- To read Data as a Json not as a String 

       request.setRequestHeader("Accept","application/json");
       request.setRequestHeader("Content-type","application/json");
   
  request.send();

  request.onload=function(){

    if(request.status>=200 && request.status<300)
  {
 let response=request.response;
    console.log(response);

    console.log("the status Code Is : "+request.status);
    alert(" Post Deleted  SuccessFully " );
  }
   else
   {
    alert("Error Post ");
   }
  }


}



function readPostsWithUserFilter()
{
        /*01- Create Object from XML HTTP Request Class */
      let request=new XMLHttpRequest();
      request.open("GET","https://jsonplaceholder.typicode.com/posts?userId=1"); //-- Open Request

      request.responseType="json"; //-- To read Data as a Json not as a String 

      request.send(); //-- Send Request

    
      request.onload=function(){
      
        if(request.status>=200 && request.status<300) //-- Ensure Status Code 
      {
          let Posts=request.response;
        for(post of Posts)
      {
        // document.getElementById("content").innerHTML=`<h1>${post.title} </h1>`

        document.getElementById("contentByUserFilter").innerHTML+=`<h1>${post.title} </h1>`
         console.log(post.title);
      }
      }
      else
      {
        alert("error ........");
      }
        
      }

}



console.log("=============== Read Post ========================");

readPosts();


//--------- Calling createNewPost Function 

console.log("================== Create Post =====================");

createNewPost();

console.log("================== Update Post =====================");

UpdatePost();

console.log("================== Delete  Post =====================");

DeletePost();
console.log("================== Delete  Post =====================");

readPostsWithUserFilter();
    </script>


</body>
</html>